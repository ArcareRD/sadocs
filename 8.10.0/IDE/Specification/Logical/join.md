## <div id="layout">聯結設定<path>(檢視表/結構展開)</path></div>

* 版面
  * ![ini]

## <div id="form-action">動作說明</div>

* 說明內容
  * [版面資訊通則](../RulesOther/README.md#ruleother1)
  * [單據異動資料按鍵操作通則](../RulesButton/README#rulebutton2)

## <div id="object-desc">欄位說明</div>
* <p id="fieldbreak3" style="color:blue;font-weight:bold">聯結設定</p>

    ![fieldbreak_m3]

    * <t>(1)聯結方式</t>
      * 用途說明
      * 規格說明:
        * 下拉選項: Left Join/ Right Join/ Cross Join/ Full Join/ Inner Join/ Union/ Sub Select
        * 預設 Left Join
        * 檢視表類型
          * 非UNION
          | 聯結方式 | `(7)聯結條件區塊`  | 動作 |
          | -------- | ----------- | --- |
          | Left join| 最少一筆 | `(7)聯結條件區塊`可新增 |
          | Right join| 最少一筆 | `(7)聯結條件區塊`可新增 |
          | Full join| 最少一筆 | `(7)聯結條件區塊`可新增 |
          | Inner join| 最少一筆 | `(7)聯結條件區塊`可新增 |
          | Cross join| 不可設定 | 清除`(7)聯結條件區塊`且不可新增 |
          | Sub Select| 最少一筆 | `(7)聯結條件區塊`可新增 |
          * UNION
          | 聯結方式 | `(7)聯結條件區塊` | 動作 |
          | -------- | ----------- | --- |
          | Union| 不可設定 | 清除`(7)聯結條件區塊` 且不可新增 |
      * 作業流程
        * <ps>待補</ps>
    * <t id="field2">(2)類別</t>
      * 用途說明
      * 規格說明:
        * 單選選項:資料表 / 檢視表
        * 切換後清除
          * `(3)暫存資料表`、`(4)來源表格`、`(5)傳遞參數`、`(13)自訂連結`
          * 當`(11)連結類別` 等於本表欄位時, 清除`(12)連結內容`      
    * <t id='field3'>(3)暫存資料表</t>
      * 用途說明
      * 規格說明:
        * 預設除能
        * 執行限制:
          * 當`(2)類別`為資料表時致能
        * 預設不勾選
    * <t>(4)來源表格</t>
      * 用途說明
      * 規格說明
        * 依據`(2)類別`
          * 資料表: [指定資料表通則][link_ruledialog3], 從本專案中, 挑選資料表, 回傳並顯示:資料表名稱
          * 檢視表: [指定檢視表通則][link_ruledialog4], 從本專案中, 挑選檢視表, 回傳並顯示:檢視表名稱
        * 改變表格需清除
          * `(5)傳遞參數`、`(13)自訂連結`
          * 當`(11)連結類別` 等於本表欄位時, 清除`(12)連結內容`
      * 作業流程
        * <ps>待補</ps>
    * <t>(5)傳遞參數</t>
      * 用途說明
      * 規格說明:
        * 開啟[傳遞參數][O9]
      * 作業流程
    * <t>(6)別名</t>
      * 用途說明
      * 規格說明
        * 執行限制:
          * 首字必須為英文字母
          * 最大長度4碼
    * <t id="field7">(7)聯結條件區塊</t>
      * 用途說明
      * 規格說明
        * 最多五筆
    * <t>(8)連結來源表格</t>
      * 用途說明
      * 規格說明:
        * 執行限制:
          * 當自訂連結有設定時除能
        * 下拉 聯結設定`(4)來源表格`清單，排除 目前駐留聯結設定
      * 作業流程
    * <t>(9)連結欄位</t>
      * 用途說明
      * 規格說明
        *  執行限制:
          * 當自訂連結有設定時除能
        * 下拉顯示 `(8)連結來源表格`的欄位清單，排除有設定密碼處理的欄位
        * 若個資加密有設定者, 須依據加密欄位規則顯示。
        * 當欄位為個資加密時
          * 當`(10)條件`不為等於、不等於時，必須清空
    * <t>(10)條件</t>
      * 用途說明
      * 規格說明:
        * 執行限制:
          * 當自訂連結有設定時除能
        * 下拉選項: 大於/ 小於/ 等於/ 大於等於/ 小於等於/ 不等於/ 存在於/ 不存在於/ 相似於
        * 當為個資加密欄位, 下拉選項:等於/ 不等於
      * 作業流程
    * <t>(11)連結類別</t>
      * 用途說明
      * 規格說明
        * 執行限制:
          * 當自訂連結有設定時除能
        * 下拉選項: 本表欄位/ 參數/ 函數/ 固定值/ 運算式
        * 當為個資加密欄位, 下拉選項: 本表欄位
        * 異動時切換`(12)連結內容`
      * 作業流程
    * <t>(12)連結內容</t>
      * 用途說明
      * 規格說明
        * 執行限制:
          * 當自訂連結有設定時除能
        * 連結類別=本表欄位，下拉 `(4)來源表格`的欄位清單
          * 若`(9)連結欄位`挑選欄位無設定個資加密, 下拉 `(4)來源表格`的欄位清單且欄位的密碼處理須為無設定
          * 若`(9)連結欄位`挑選欄位有設定個資加密, 下拉 `(4)來源表格`的欄位清單且欄位的個資加密須設定
          * 若欄位的個資加密有設定，須依據加密欄位規則顯示。
        * 連結類別=參數, 下拉[檢視表 `表格名稱`][log_index]接收參數清單
        * 連結類別=固定值, 自行輸入
        * 連結類別=運算式, 開啟[運算式][link_expression], 限定:無查表功能
      * 作業流程
    * <t>(13)自訂連結</t>
      * 用途說明
      * 規格說明
        * 執行限制:
          * 當`(8)連結來源表格`、`(9)連結欄位`、`(11)連結類別`、`(12)連結內容`有設定時除能
        * 開啟[運算式][link_expression], 限定:無查表功能
      * 作業流程
    * <t>(14)新增</t>
      * 用途說明
      * 規格說明: 
        * 新增`(7)聯結條件區塊`一筆紀錄, 增加到最下方
    * <t>(15)刪除</t>
      * 用途說明
      * 規格說明:
        * 刪除駐留筆紀錄
      * 作業流程
    * <t>(16)儲存</t>
      * 用途說明
      * 規格說明
        * 被鎖定(本次操作): 
            * 執行[儲存檢控](#save-action)
            * 檢查以下資訊是否有異動
              * `(4)來源表格`已改變
                * 清除其他參考來源中有連結該表格`(7)聯結條件區塊`的`(9)連結欄位`
                * 清除[欄位清單]中有挑選該表格欄位的[`資料內容`][logcols_data]
              * `(6)別名`已改變
                * 替換其他參考來源中有連結該表格`(7)聯結條件區塊`的`(8)連結來源表格`
                * 替換[欄位清單]中有挑選該表格欄位的[`資料內容`][logcols_data]
              * `(3)暫存資料表`已改變: 重顯[結構展開 `參考來源表格`][loglist_as]
                * 勾選: 關聯類型對應圖示 + (來源代號.來源型態) + 來源表格名稱 + (別名) + (暫存資料表) +  [(需傳入參數)]
                * 未勾選: 關聯類型對應圖示 + (來源代號.來源型態) + 來源表格名稱 + (別名) + [(需傳入參數)]
            * 將本次資料儲存
          * 無鎖定、被鎖定(非本次操作):
            * 彈出錯誤訊息:該單據已被解除鎖定，無法存回。
      * 作業流程
    * <t>(17)取消</t>
      * 用途說明
      * 規格說明:
        * 關閉單據
      * 作業流程
      
## <div id="save-action">儲存檢控</div>
* 以下欄位不允空白檢控 [動作通則][link_other2]
  * `(4)來源表格`、`(6)別名`
* 其他檢控
  * 當`(8)連結來源表格`、`(9)連結欄位`、`(10)條件`、`(11)連結類別`、`(12)連結內容`任一欄位有設定, 則其餘欄位都不可空白
  * 當`(8)連結來源表格`、`(9)連結欄位`、`(10)條件`、`(11)連結類別`、`(12)連結內容`所有欄位都無設定, 則`(13)自訂連結` 必須設定
  * 若`(9)連結欄位` 為個資加密時
    * `(11)連結類別`必須為本表欄位
    * `(12)連結內容`必須為個資加密
    * `(10)條件` 必須為等於或不等於
  * 若`(9)連結欄位` 不為個資加密時
    * `(12)連結內容`不可為個資加密或密碼處理

<!-- 圖示_介面 -->
[ini]:attachment/ini_logjoin.png "[介面]聯結設定"
[fieldbreak_m3]:attachment/mark_ini_logjoin.png "[欄位說明]聯結設定"
[fieldbreak_m4]:attachment/mark_ini_logjoin_phydata.png "[欄位說明]結構欄位"
[O9]: "傳遞參數" "共用通則_開啟傳遞參數"
[link_ruledialog4]:/8.10.0/IDE/Specification/RulesDialog/README#ruledialog4 "共用通則_開啟單據/挑選檢視表通則"
[link_ruledialog3]:/8.10.0/IDE/Specification/RulesDialog/README#ruledialog3 "共用通則_開啟單據/挑選資料表通則"
[link_ruledialog8]:/8.10.0/IDE/Specification/RulesDialog/README#ruledialog8 "共用通則_開啟單據/挑選檢視表元件通則"
[link_expression]:/8.10.0/IDE/Specification/運算式 "共用通則_開啟運算式"
[log_index]:./README.md?id=field15 "檢視表 表格名稱"
[loglist_as]:./joinlist.md?id=field3 "結構展開 參考來源表格"
[logcols_data]:./columns?id=field31 "資料內容"
[link_other2]:../RulesOther/README?id=p-idruleother7存回不允空白檢控通則 "儲存檢控_不允空白"