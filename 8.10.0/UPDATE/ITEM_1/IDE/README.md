### <div id="user">規劃人員</div>
* Prenkt

### <div id="updatedate">規劃日期</div>
* 2020/11/13

### <div id="trac">TRAC</div>
* #8190

### <div id="requirement">需求展開</div>
* 規格說明
    * 前提:
        * 本次離線功能, 僅指 ruRU MAE進入離線模式, 且該模式下僅能使用離線用APP表單, 與裝置本身是否可連網無關
        * 配合離線資料使用SQLite, 支援版本: Android API 27: 3.19；ios 12.0(含以上): 3.24.0
    * 提供設計者設定離線任務
        * 一離線任務, 可設定多個離線表單, 且只能為APP表單；並可指定其中一個APP表單為任務首頁表單
        * 提供下載離線資料的範圍的設定, 且為必須設定
        * 提供同步表單設定, 可不設定
        * 離線任務須提供打樣功能
    * 檢視表,
        * 提供產生離線資料上傳用對應表格的設定
        * 提供設定為離線用檢視表(可任意修改), 並注意下列設計限制
            * 不支援設定接收參數
            * 結構展開中, 參考來源為檢視表者, 須同為離線用檢視表
            * 欄位清單, 若欄位型態=全唯碼, 則增加設定項目: 檔案唯一號 ; 不提供挑選個資加密或密碼處理的欄位
    * 流程下的單據清單, 不可設定離線用APP表單
    * 提供APP表單設定為離線用(可任意修改), 並注意下列設計限制
        * 元件加註_被動更新: 不支援距離計算
        * 元件加註_嵌入物件: 不支援嵌入網頁；嵌入檔案容器控制, 在編輯狀態下, 表格類型只能挑選資料表暫存
        * 按鍵加註_開啟它單: 除設計類型外，增加是否為離線用判斷
        * 按鍵加註_特殊處理: 不支援連結物件、檔案傳輸
        * 按鍵加註_外部執行: 不支援此加註
        * 按鍵加註_資料過濾: 新增離線資料過濾方式, 且須提供可另存過濾內容
        * 按鍵加註_資料交易: 新增離線資料交易方式
        * 所有加註內容中, 若有引用檢視表來源的加註, 須增加過濾離線用檢視表
        * 不提供單一離線用APP表單進行打樣
* 規劃項目展開
    * 首頁
        * 首頁架構樹: 
            * 作業流程下新增離線任務節點, 且在離線任務設定中出現的表單清單須出現在離線任務的節點下
            * 資料表格: 增加 DB08.離線資料交易 節點
        * 新增表單/報表: 當為APP表單，增加離線用設定
        * 新增任務: 新增本單
        * 特色重點: 查詢所有有特色重點的單元
    * 版面設計
        * 表單設計版面: 當為APP表單，增加離線用設定
        * 表單版面生成表格: 產生的檢視表, 依表單判斷是否為離線用
        * 表格生成表單版面: 匯入檢視表, 依表單判斷是否可挑選離線用表格
        * 表單精靈: 匯入檢視表, 過濾離線用
    * 表單加註
        * 資料區: 過濾條件、角色條件，限制不可使用自訂
    * 元件加註
        * 預設給值: 引用資料表、檢視表、表單, 增加離線資料上傳用、離線用判斷
        * 選項清單: 引用資料表、檢視表、表單, 增加離線資料上傳用、離線用判斷
        * 開窗參照: 引用資料表、檢視表、表單, 增加離線資料上傳用、離線用判斷
        * 檢控限制: 引用資料表、檢視表、表單, 增加離線資料上傳用、離線用判斷
        * 更新給值: 引用資料表、檢視表、表單, 增加離線資料上傳用、離線用判斷
        * 被動更新: 不支援距離計算; 引用資料表、檢視表、表單, 增加離線資料上傳用、離線用判斷
        * 嵌入物件: 不支援嵌入網頁; 嵌入檔案容器控制, 在編輯狀態下, 表格類型只能挑選資料表暫存; 引用資料表、檢視表、表單, 增加離線資料上傳用、離線用判斷
        * 樞紐設定: 引用資料表、檢視表、表單, 增加離線資料上傳用、離線用判斷
        * 元件加註複製: APP表單, 增加過濾離線用
    * 按鍵加註
        * 按鍵行為選項: 增加離線用APP表單限制可加註的按鍵行為
        * 規格定義: 增加顯示離線資料交易, 名稱同資料交易
        * 基本設定: 引用資料表、檢視表、表單, 增加離線資料上傳用、離線用判斷
        * 執行限制: 引用資料表、檢視表、表單, 增加離線資料上傳用、離線用判斷
        * 開啟它單: APP表單, 增加過濾離線用
        * 開啟報表: 引用資料表、檢視表、表單, 增加離線資料上傳用、離線用判斷
        * 資料交易: 引用資料表、檢視表、表單, 增加離線資料上傳用、離線用判斷
        * 離線資料交易: 新增本單
        * 資料交換: 引用資料表、檢視表、表單, 增加離線資料上傳用、離線用判斷
        * 郵件發送: 引用資料表、檢視表、表單, 增加離線資料上傳用、離線用判斷
        * 資料載入: 引用資料表、檢視表、表單, 增加離線資料上傳用、離線用判斷
        * 資料過濾: 新增離線用APP表單的加註介面
            * 儲存過濾設定內容: 新增本單
        * 外部執行: 引用資料表、檢視表、表單, 增加離線資料上傳用、離線用判斷
        * 溝通訊息: 引用資料表、檢視表、表單, 增加離線資料上傳用、離線用判斷
        * 表單特效: 引用資料表、檢視表、表單, 增加離線資料上傳用、離線用判斷
        * 動態表格: 引用資料表、檢視表、表單, 增加離線資料上傳用、離線用判斷
        * 帳號同步: 引用資料表、檢視表、表單, 增加離線資料上傳用、離線用判斷
        * 系統複製: 引用資料表、檢視表、表單, 增加離線資料上傳用、離線用判斷
        * 邏輯函數: 引用資料表、檢視表、表單, 增加離線資料上傳用、離線用判斷
        * 連結物件: 引用資料表、檢視表、表單, 增加離線資料上傳用、離線用判斷
        * 檔案傳輸: 引用資料表、檢視表、表單, 增加離線資料上傳用、離線用判斷
        * 預存程序: 引用資料表、檢視表、表單, 增加離線資料上傳用、離線用判斷
        * 裝置支援: 引用資料表、檢視表、表單, 增加離線資料上傳用、離線用判斷
        * 推播通知: 引用資料表、檢視表、表單, 增加離線資料上傳用、離線用判斷
        * 按鍵加註複製: APP表單, 增加過濾離線用
    * 報表加註
        * 報表加註: 引用資料表、檢視表、表單, 增加離線資料上傳用、離線用判斷
        * 報表元件加註: 引用資料表、檢視表、表單, 增加離線資料上傳用、離線用判斷
    * 資料表格
        * 資料表: 擴充顯示離線資料上傳用表格; 非離線資料上傳用表格, 外檔關聯、主動更新, 增加離線資料上傳用判斷; 開啟<規格備註>可撰寫特色重點
        * 檢視表: 擴充功能:產生離線資料上傳用對應表格；擴充使用時機:離線用; 開啟<規格備註>可撰寫特色重點
        * 資料交易: 引用資料表、檢視表、表單, 增加離線資料上傳用、離線用判斷 ; 目的類型新增選項:離線任務同步完成
        * 離線資料交易: 本次新增表單 (本版暫不提供內容複製)
            * 新增離線資料交易: 本次新增表單
        * 同步檢視表欄位/同步參考欄位: 若修改到離線資料上傳用來源, 須同步至對應的離線資料上傳用
        * 表格欄位清單: 若修改到離線資料上傳用來源, 須同步至對應的離線資料上傳用
    * 輔助工具
        * 料號對照: 增加載入離線資料交易、離線任務
        * 結構追蹤: 可查詢離線資料交易、離線任務
        * 版本發行: 增加載入離線資料交易、離線任務
            * 單元檢錯: 增加離線資料交易、離線任務
        * 待辦事項清單: 增加載入離線資料交易、離線任務
        * 除錯追蹤: 可查詢離線資料交易、離線任務
        * 規格複製: 不可複製離線資料上傳用, 增加離線資料交易
        * 跨專案複製: 不可複製離線資料上傳用, 增加離線資料交易
        * 規格標註清單: 不可複製離線資料上傳用
        * 規格書: 因應本次異動內容，增加輸出內容
    * 系統資源
        * 系統函數: 增加判斷函數是否有支援SQLite語法
    * 共用單據
        * 條件式: 引用資料表、檢視表, 增加離線資料上傳用、離線用判斷; 依前是否為離線表單, 判斷可挑選函數
        * 運算式: 引用資料表、檢視表, 增加離線資料上傳用、離線用判斷; 依前是否為離線表單, 判斷可挑選函數
        * 訊息替代: 引用資料表、檢視表, 增加離線資料上傳用、離線用判斷
    * 共用通則
        * 開啟單據
            * 操作按鍵執行條件訊息通則
            * 操作邏輯函數表格通則
    * 影響修改
        * 升級轉資料: 現有表單、檢視表, 設定為非離線用
* 作業流程
    * ![pic][image_MAEOffline]

<!-- 圖片 -->
[image_MAEOffline]:attachment/MAEOffline.png
